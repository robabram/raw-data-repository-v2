"""initial migration

Revision ID: 0cdf0760653e
Revises: 
Create Date: 2019-02-19 09:20:19.708339

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import mysql
from rdr_server.model.base_model import UTCDateTime

# revision identifiers, used by Alembic.
revision = '0cdf0760653e'
down_revision = None
branch_labels = None
depends_on = None


def upgrade(schema):
    globals()["upgrade_{0}".format(schema)]()


def downgrade(schema):
    globals()["downgrade_{0}".format(schema)]()


def upgrade_rdrv2():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('calendar',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('day', sa.Date(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('day'),
    schema='rdrv2'
    )
    op.create_table('code_book',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('code_book_id', sa.Integer(), nullable=True),
    sa.Column('latest', sa.Boolean(), nullable=False),
    sa.Column('name', sa.String(length=80), nullable=False),
    sa.Column('system', sa.String(length=255), nullable=False),
    sa.Column('version', sa.String(length=80), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('code_book_id'),
    sa.UniqueConstraint('system', 'version'),
    schema='rdrv2'
    )
    op.create_table('hpo',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('hpo_id', sa.Integer(), autoincrement=False, nullable=True),
    sa.Column('name', sa.String(length=20), nullable=True),
    sa.Column('display_name', sa.String(length=255), nullable=True),
    sa.Column('organization_type', sa.Enum('UNSET', 'HPO', 'FQHC', 'DV', 'VA', name='organizationtype'), nullable=True),
    sa.Column('is_obsolete', sa.Enum('ACTIVE', 'OBSOLETE', name='obsoletestatus'), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('hpo_id'),
    sa.UniqueConstraint('name'),
    schema='rdrv2'
    )
    op.create_table('log_position',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('log_position_id', sa.Integer(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('log_position_id'),
    schema='rdrv2'
    )
    op.create_table('metrics_version',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('metrics_version_id', sa.Integer(), nullable=True),
    sa.Column('in_progress', sa.Boolean(), nullable=False),
    sa.Column('complete', sa.Boolean(), nullable=False),
    sa.Column('date', UTCDateTime(fsp=6), nullable=False),
    sa.Column('data_version', sa.Integer(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('metrics_version_id'),
    schema='rdrv2'
    )
    op.create_table('questionnaire',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('questionnaire_id', sa.Integer(), nullable=True),
    sa.Column('version', sa.Integer(), nullable=False),
    sa.Column('last_modified', UTCDateTime(fsp=6), nullable=False),
    sa.Column('resource', sa.JSON(), nullable=False),
    sa.Column('status', sa.Enum('VALID', 'INVALID', name='questionnairedefinitionstatus'), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('questionnaire_id'),
    schema='rdrv2'
    )
    op.create_table('questionnaire_history',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('questionnaire_id', sa.Integer(), nullable=True),
    sa.Column('last_modified', UTCDateTime(fsp=6), nullable=False),
    sa.Column('resource', sa.JSON(), nullable=False),
    sa.Column('status', sa.Enum('VALID', 'INVALID', name='questionnairedefinitionstatus'), nullable=True),
    sa.Column('version', sa.Integer(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('questionnaire_id'),
    sa.UniqueConstraint('version'),
    schema='rdrv2'
    )
    op.create_table('code',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('code_id', sa.Integer(), nullable=True),
    sa.Column('system', sa.String(length=255), nullable=False),
    sa.Column('value', sa.String(length=80), nullable=False),
    sa.Column('short_value', sa.String(length=50), nullable=True),
    sa.Column('display', sa.UnicodeText(), nullable=True),
    sa.Column('topic', sa.UnicodeText(), nullable=True),
    sa.Column('code_type', sa.Enum('MODULE', 'TOPIC', 'QUESTION', 'ANSWER', name='codetype'), nullable=False),
    sa.Column('mapped', sa.Boolean(), nullable=False),
    sa.Column('code_book_id', sa.Integer(), nullable=True),
    sa.Column('parent_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['code_book_id'], ['rdrv2.code_book.code_book_id'], ),
    sa.ForeignKeyConstraint(['parent_id'], ['rdrv2.code.code_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('code_id'),
    sa.UniqueConstraint('system', 'value'),
    schema='rdrv2'
    )
    op.create_table('metrics_bucket',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('metrics_version_id', sa.Integer(), nullable=True),
    sa.Column('date', sa.Date(), nullable=True),
    sa.Column('hpo_id', sa.String(length=20), nullable=True),
    sa.Column('metrics', sa.BLOB(), nullable=False),
    sa.ForeignKeyConstraint(['metrics_version_id'], ['rdrv2.metrics_version.metrics_version_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('metrics_version_id', 'date', 'hpo_id', name='uidx_version_date_hpoid'),
    schema='rdrv2'
    )
    op.create_table('organization',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('external_id', sa.String(length=80), nullable=False),
    sa.Column('display_name', sa.String(length=255), nullable=False),
    sa.Column('hpo_id', sa.Integer(), nullable=False),
    sa.Column('is_obsolete', sa.Enum('ACTIVE', 'OBSOLETE', name='obsoletestatus'), nullable=True),
    sa.ForeignKeyConstraint(['hpo_id'], ['rdrv2.hpo.hpo_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('organization_id'),
    schema='rdrv2'
    )
    op.create_table('code_history',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('system', sa.String(length=255), nullable=False),
    sa.Column('value', sa.String(length=80), nullable=False),
    sa.Column('short_value', sa.String(length=50), nullable=True),
    sa.Column('display', sa.UnicodeText(), nullable=True),
    sa.Column('topic', sa.UnicodeText(), nullable=True),
    sa.Column('code_type', sa.Enum('MODULE', 'TOPIC', 'QUESTION', 'ANSWER', name='codetype'), nullable=False),
    sa.Column('mapped', sa.Boolean(), nullable=False),
    sa.Column('code_history_id', sa.Integer(), nullable=True),
    sa.Column('code_id', sa.Integer(), nullable=True),
    sa.Column('code_book_id', sa.Integer(), nullable=True),
    sa.Column('parent_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['code_book_id'], ['rdrv2.code_book.code_book_id'], ),
    sa.ForeignKeyConstraint(['parent_id'], ['rdrv2.code.code_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('code_book_id', 'code_id', name='uidx_cbid_code_id'),
    sa.UniqueConstraint('code_book_id', 'system', 'value', name='uidx_cbid_system_value'),
    sa.UniqueConstraint('code_history_id'),
    schema='rdrv2'
    )
    op.create_table('questionnaire_concept',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('questionnaire_concept_id', sa.Integer(), nullable=True),
    sa.Column('questionnaire_id', sa.Integer(), nullable=False),
    sa.Column('questionnaire_version', sa.Integer(), nullable=False),
    sa.Column('code_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['code_id'], ['rdrv2.code.code_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('questionnaire_concept_id'),
    sa.UniqueConstraint('questionnaire_id', 'questionnaire_version', 'code_id'),
    schema='rdrv2'
    )
    op.create_table('questionnaire_question',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('questionnaire_question_id', sa.Integer(), nullable=True),
    sa.Column('questionnaire_id', sa.Integer(), nullable=True),
    sa.Column('questionnaire_version', sa.Integer(), nullable=True),
    sa.Column('link_id', sa.String(length=40), nullable=True),
    sa.Column('code_id', sa.Integer(), nullable=False),
    sa.Column('repeats', sa.Boolean(), nullable=False),
    sa.ForeignKeyConstraint(['code_id'], ['rdrv2.code.code_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('questionnaire_id', 'questionnaire_version', 'link_id'),
    sa.UniqueConstraint('questionnaire_question_id'),
    schema='rdrv2'
    )
    op.create_table('site',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('site_id', sa.Integer(), nullable=True),
    sa.Column('site_name', sa.String(length=255), nullable=False),
    sa.Column('google_group', sa.String(length=255), nullable=False),
    sa.Column('mayolink_client_number', sa.Integer(), nullable=True),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('hpo_id', sa.Integer(), nullable=True),
    sa.Column('site_status', sa.Enum('UNSET', 'ACTIVE', 'INACTIVE', name='sitestatus'), nullable=True),
    sa.Column('enrolling_status', sa.Enum('UNSET', 'ACTIVE', 'INACTIVE', name='enrollingstatus'), nullable=True),
    sa.Column('digital_scheduling_status', sa.Enum('UNSET', 'ACTIVE', 'INACTIVE', name='digitalschedulingstatus'), nullable=True),
    sa.Column('schedule_instructions', sa.String(length=2048), nullable=True),
    sa.Column('schedule_instructions_es', sa.String(length=2048), nullable=True),
    sa.Column('launch_date', sa.Date(), nullable=True),
    sa.Column('notes', sa.UnicodeText(), nullable=True),
    sa.Column('notes_es', sa.UnicodeText(), nullable=True),
    sa.Column('latitude', sa.Float(), nullable=True),
    sa.Column('longitude', sa.Float(), nullable=True),
    sa.Column('time_zone_id', sa.String(length=1024), nullable=True),
    sa.Column('directions', sa.UnicodeText(), nullable=True),
    sa.Column('physical_location_name', sa.String(length=1024), nullable=True),
    sa.Column('address_1', sa.String(length=1024), nullable=True),
    sa.Column('address_2', sa.String(length=1024), nullable=True),
    sa.Column('city', sa.String(length=255), nullable=True),
    sa.Column('state', sa.String(length=2), nullable=True),
    sa.Column('zip_code', sa.String(length=10), nullable=True),
    sa.Column('phone_number', sa.String(length=80), nullable=True),
    sa.Column('admin_emails', sa.String(length=4096), nullable=True),
    sa.Column('link', sa.String(length=255), nullable=True),
    sa.Column('is_obsolete', sa.Enum('ACTIVE', 'OBSOLETE', name='obsoletestatus'), nullable=True),
    sa.ForeignKeyConstraint(['hpo_id'], ['rdrv2.hpo.hpo_id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['rdrv2.organization.organization_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('google_group'),
    sa.UniqueConstraint('site_id'),
    schema='rdrv2'
    )
    op.create_table('participant',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('participant_id', sa.String(length=20), nullable=True),
    sa.Column('external_id', sa.BigInteger(), nullable=True),
    sa.Column('version', sa.Integer(), nullable=False),
    sa.Column('biobank_id', sa.Integer(), nullable=False),
    sa.Column('last_modified', UTCDateTime(fsp=6), nullable=False),
    sa.Column('sign_up_time', UTCDateTime(fsp=6), nullable=False),
    sa.Column('provider_link', sa.BLOB(), nullable=True),
    sa.Column('client_id', sa.String(length=80), nullable=True),
    sa.Column('withdrawal_status', sa.Enum('NOT_WITHDRAWN', 'NO_USE', name='withdrawalstatus'), nullable=False),
    sa.Column('withdrawal_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('withdrawal_reason', sa.Enum('UNSET', 'FRAUDULENT', 'DUPLICATE', 'TEST', name='withdrawalreason'), nullable=True),
    sa.Column('withdrawal_reason_justification', sa.UnicodeText(), nullable=True),
    sa.Column('suspension_status', sa.Enum('NOT_SUSPENDED', 'NO_CONTACT', name='suspensionstatus'), nullable=False),
    sa.Column('suspension_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('is_ghost_id', sa.Boolean(), nullable=True),
    sa.Column('date_added_ghost', UTCDateTime(fsp=6), nullable=True),
    sa.Column('hpo_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('site_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['hpo_id'], ['rdrv2.hpo.hpo_id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['rdrv2.organization.organization_id'], ),
    sa.ForeignKeyConstraint(['site_id'], ['rdrv2.site.site_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('external_id'),
    sa.UniqueConstraint('participant_id'),
    schema='rdrv2'
    )
    op.create_index('participant_biobank_id', 'participant', ['biobank_id'], unique=True, schema='rdrv2')
    op.create_index('participant_hpo_id', 'participant', ['hpo_id'], unique=False, schema='rdrv2')
    op.create_index('participant_withdrawl_sign_up_hpo', 'participant', ['participant_id', 'withdrawal_status', 'sign_up_time', 'hpo_id', 'is_ghost_id'], unique=False, schema='rdrv2')
    op.create_table('participant_history',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('participant_id', sa.String(length=20), nullable=True),
    sa.Column('external_id', sa.BigInteger(), nullable=True),
    sa.Column('biobank_id', sa.Integer(), nullable=False),
    sa.Column('last_modified', UTCDateTime(fsp=6), nullable=False),
    sa.Column('sign_up_time', UTCDateTime(fsp=6), nullable=False),
    sa.Column('provider_link', sa.BLOB(), nullable=True),
    sa.Column('client_id', sa.String(length=80), nullable=True),
    sa.Column('withdrawal_status', sa.Enum('NOT_WITHDRAWN', 'NO_USE', name='withdrawalstatus'), nullable=False),
    sa.Column('withdrawal_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('withdrawal_reason', sa.Enum('UNSET', 'FRAUDULENT', 'DUPLICATE', 'TEST', name='withdrawalreason'), nullable=True),
    sa.Column('withdrawal_reason_justification', sa.UnicodeText(), nullable=True),
    sa.Column('suspension_status', sa.Enum('NOT_SUSPENDED', 'NO_CONTACT', name='suspensionstatus'), nullable=False),
    sa.Column('suspension_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('is_ghost_id', sa.Boolean(), nullable=True),
    sa.Column('date_added_ghost', UTCDateTime(fsp=6), nullable=True),
    sa.Column('version', sa.Integer(), nullable=True),
    sa.Column('hpo_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('site_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['hpo_id'], ['rdrv2.hpo.hpo_id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['rdrv2.organization.organization_id'], ),
    sa.ForeignKeyConstraint(['site_id'], ['rdrv2.site.site_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('external_id'),
    sa.UniqueConstraint('participant_id'),
    sa.UniqueConstraint('version'),
    schema='rdrv2'
    )
    op.create_table('biobank_order',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('biobank_order_id', sa.String(length=80), nullable=True),
    sa.Column('version', sa.Integer(), nullable=False),
    sa.Column('source_username', sa.String(length=255), nullable=True),
    sa.Column('collected_username', sa.String(length=255), nullable=True),
    sa.Column('processed_username', sa.String(length=255), nullable=True),
    sa.Column('finalized_username', sa.String(length=255), nullable=True),
    sa.Column('order_status', sa.Enum('UNSET', 'AMENDED', 'CANCELLED', name='biobankorderstatus'), nullable=True),
    sa.Column('amended_reason', sa.UnicodeText(), nullable=True),
    sa.Column('last_modified', UTCDateTime(fsp=6), nullable=True),
    sa.Column('restored_username', sa.String(length=255), nullable=True),
    sa.Column('restored_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('amended_username', sa.String(length=255), nullable=True),
    sa.Column('amended_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('cancelled_username', sa.String(length=255), nullable=True),
    sa.Column('cancelled_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('collected_note', sa.UnicodeText(), nullable=True),
    sa.Column('processed_note', sa.UnicodeText(), nullable=True),
    sa.Column('finalized_note', sa.UnicodeText(), nullable=True),
    sa.Column('participant_id', sa.String(length=20), nullable=False),
    sa.Column('amended_biobank_order_id', sa.String(length=80), nullable=True),
    sa.Column('log_position_id', sa.Integer(), nullable=False),
    sa.Column('source_site_id', sa.Integer(), nullable=True),
    sa.Column('collected_site_id', sa.Integer(), nullable=True),
    sa.Column('processed_site_id', sa.Integer(), nullable=True),
    sa.Column('finalized_site_id', sa.Integer(), nullable=True),
    sa.Column('restored_site_id', sa.Integer(), nullable=True),
    sa.Column('amended_site_id', sa.Integer(), nullable=True),
    sa.Column('cancelled_site_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['amended_biobank_order_id'], ['rdrv2.biobank_order.biobank_order_id'], ),
    sa.ForeignKeyConstraint(['amended_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['cancelled_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['collected_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['finalized_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['log_position_id'], ['rdrv2.log_position.log_position_id'], ),
    sa.ForeignKeyConstraint(['participant_id'], ['rdrv2.participant.participant_id'], ),
    sa.ForeignKeyConstraint(['processed_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['restored_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['source_site_id'], ['rdrv2.site.site_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('biobank_order_id'),
    schema='rdrv2'
    )
    op.create_table('biobank_stored_sample',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('biobank_stored_sample_id', sa.String(length=80), nullable=True),
    sa.Column('biobank_id', sa.Integer(), nullable=True),
    sa.Column('biobank_order_identifier', sa.String(length=80), nullable=False),
    sa.Column('test', sa.String(length=80), nullable=False),
    sa.Column('confirmed', UTCDateTime(fsp=6), nullable=True),
    sa.Column('status', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('disposed', UTCDateTime(fsp=6), nullable=True),
    sa.Column('family_id', sa.String(length=80), nullable=True),
    sa.ForeignKeyConstraint(['biobank_id'], ['rdrv2.participant.biobank_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('biobank_stored_sample_id'),
    schema='rdrv2'
    )
    op.create_table('participant_summary',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('participant_fk', sa.BigInteger(), nullable=True),
    sa.Column('participant_id', sa.String(length=20), nullable=True),
    sa.Column('biobank_id', sa.Integer(), nullable=False),
    sa.Column('last_modified', UTCDateTime(fsp=6), nullable=True),
    sa.Column('first_name', sa.String(length=255), nullable=False),
    sa.Column('middle_name', sa.String(length=255), nullable=True),
    sa.Column('last_name', sa.String(length=255), nullable=False),
    sa.Column('zip_code', sa.String(length=10), nullable=True),
    sa.Column('state_id', sa.Integer(), nullable=True),
    sa.Column('city', sa.String(length=255), nullable=True),
    sa.Column('street_address', sa.String(length=255), nullable=True),
    sa.Column('street_address2', sa.String(length=255), nullable=True),
    sa.Column('phone_number', sa.String(length=80), nullable=True),
    sa.Column('login_phone_number', sa.String(length=80), nullable=True),
    sa.Column('email', sa.String(length=255), nullable=True),
    sa.Column('primary_language', sa.String(length=80), nullable=True),
    sa.Column('recontact_method_id', sa.Integer(), nullable=True),
    sa.Column('language_id', sa.Integer(), nullable=True),
    sa.Column('date_of_birth', sa.Date(), nullable=True),
    sa.Column('gender_identity_id', sa.Integer(), nullable=True),
    sa.Column('sex_id', sa.Integer(), nullable=True),
    sa.Column('sexual_orientation_id', sa.Integer(), nullable=True),
    sa.Column('education_id', sa.Integer(), nullable=True),
    sa.Column('income_id', sa.Integer(), nullable=True),
    sa.Column('enrollment_status', sa.Enum('INTERESTED', 'MEMBER', 'FULL_PARTICIPANT', name='enrollmentstatus'), nullable=True),
    sa.Column('race', sa.Enum('UNSET', 'PMI_Skip', 'AMERICAN_INDIAN_OR_ALASKA_NATIVE', 'BLACK_OR_AFRICAN_AMERICAN', 'ASIAN', 'NATIVE_HAWAIIAN_OR_OTHER_PACIFIC_ISLANDER', 'WHITE', 'HISPANIC_LATINO_OR_SPANISH', 'MIDDLE_EASTERN_OR_NORTH_AFRICAN', 'HLS_AND_WHITE', 'HLS_AND_BLACK', 'HLS_AND_ONE_OTHER_RACE', 'HLS_AND_MORE_THAN_ONE_OTHER_RACE', 'MORE_THAN_ONE_RACE', 'OTHER_RACE', 'PREFER_NOT_TO_SAY', name='race'), nullable=True),
    sa.Column('physical_measurements_status', sa.Enum('UNSET', 'COMPLETED', 'CANCELLED', name='physicalmeasurementsstatus'), nullable=True),
    sa.Column('physical_measurements_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('physical_measurements_finalized_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('physical_measurements_created_site_id', sa.Integer(), nullable=True),
    sa.Column('physical_measurements_finalized_site_id', sa.Integer(), nullable=True),
    sa.Column('sign_up_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('enrollment_status_member_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('enrollment_status_core_stored_sample_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('enrollment_status_core_ordered_sample_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('consent_for_study_enrollment', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('consent_for_study_enrollment_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('consent_for_electronic_health_records', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('consent_for_electronic_health_records_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('consent_for_dv_electronic_health_records_sharing', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('consent_for_dv_electronic_health_records_sharing_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('consent_for_cabor', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('consent_for_cabor_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('questionnaire_on_overall_health', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('questionnaire_on_overall_health_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('questionnaire_on_lifestyle', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('questionnaire_on_lifestyle_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('questionnaire_on_the_basics', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('questionnaire_on_the_basics_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('questionnaire_on_healthcare_access', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('questionnaire_on_healthcare_access_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('questionnaire_on_medical_history', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('questionnaire_on_medical_history_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('questionnaire_on_medications', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('questionnaire_on_medications_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('questionnaire_on_family_health', sa.Enum('UNSET', 'SUBMITTED', 'SUBMITTED_NO_CONSENT', 'SUBMITTED_NOT_SURE', 'SUBMITTED_INVALID', name='questionnairestatus'), nullable=True),
    sa.Column('questionnaire_on_family_health_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1sst8', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1sst8_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_2sst8', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_2sst8_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1ss08', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1ss08_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1pst8', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1pst8_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_2pst8', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_2pst8_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1ps08', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1ps08_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1hep4', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1hep4_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1ed04', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1ed04_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1ed10', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1ed10_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_2ed10', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_2ed10_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1ur10', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1ur10_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1ur90', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1ur90_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1sal', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1sal_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1sal2', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1sal2_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1ed02', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1ed02_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1cfd9', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1cfd9_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_status_1pxr2', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('sample_status_1pxr2_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1sst8', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1sst8_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_2sst8', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_2sst8_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1ss08', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1ss08_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1pst8', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1pst8_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_2pst8', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_2pst8_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1ps08', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1ps08_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1hep4', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1hep4_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1ed04', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1ed04_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1ed10', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1ed10_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_2ed10', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_2ed10_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1ur10', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1ur10_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1ur90', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1ur90_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1sal', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1sal_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1sal2', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1sal2_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1ed02', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1ed02_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1cfd9', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1cfd9_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('sample_order_status_1pxr2', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('sample_order_status_1pxr2_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('num_completed_baseline_ppi_modules', sa.SmallInteger(), nullable=True),
    sa.Column('num_completed_ppi_modules', sa.SmallInteger(), nullable=True),
    sa.Column('num_baseline_samples_arrived', sa.SmallInteger(), nullable=True),
    sa.Column('samples_to_isolate_dna', sa.Enum('UNSET', 'RECEIVED', 'DISPOSED', 'CONSUMED', 'UNKNOWN', 'SAMPLE_NOT_RECEIVED', 'SAMPLE_NOT_PROCESSED', 'ACCESSINGING_ERROR', 'LAB_ACCIDENT', 'QNS_FOR_PROCESSING', 'QUALITY_ISSUE', name='samplestatus'), nullable=True),
    sa.Column('biospecimen_status', sa.Enum('UNSET', 'CREATED', 'COLLECTED', 'PROCESSED', 'FINALIZED', name='orderstatus'), nullable=True),
    sa.Column('biospecimen_order_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('biospecimen_source_site_id', sa.Integer(), nullable=True),
    sa.Column('biospecimen_collected_site_id', sa.Integer(), nullable=True),
    sa.Column('biospecimen_processed_site_id', sa.Integer(), nullable=True),
    sa.Column('biospecimen_finalized_site_id', sa.Integer(), nullable=True),
    sa.Column('withdrawal_status', sa.Enum('NOT_WITHDRAWN', 'NO_USE', name='withdrawalstatus'), nullable=False),
    sa.Column('withdrawal_reason', sa.Enum('UNSET', 'FRAUDULENT', 'DUPLICATE', 'TEST', name='withdrawalreason'), nullable=True),
    sa.Column('withdrawal_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('withdrawal_reason_justification', sa.UnicodeText(), nullable=True),
    sa.Column('suspension_status', sa.Enum('NOT_SUSPENDED', 'NO_CONTACT', name='suspensionstatus'), nullable=False),
    sa.Column('suspension_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('hpo_id', sa.Integer(), nullable=False),
    sa.Column('organization_id', sa.Integer(), nullable=True),
    sa.Column('site_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['biospecimen_collected_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['biospecimen_finalized_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['biospecimen_processed_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['biospecimen_source_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['education_id'], ['rdrv2.code.code_id'], ),
    sa.ForeignKeyConstraint(['gender_identity_id'], ['rdrv2.code.code_id'], ),
    sa.ForeignKeyConstraint(['hpo_id'], ['rdrv2.hpo.hpo_id'], ),
    sa.ForeignKeyConstraint(['income_id'], ['rdrv2.code.code_id'], ),
    sa.ForeignKeyConstraint(['language_id'], ['rdrv2.code.code_id'], ),
    sa.ForeignKeyConstraint(['organization_id'], ['rdrv2.organization.organization_id'], ),
    sa.ForeignKeyConstraint(['participant_fk'], ['rdrv2.participant.id'], ),
    sa.ForeignKeyConstraint(['physical_measurements_created_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['physical_measurements_finalized_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['recontact_method_id'], ['rdrv2.code.code_id'], ),
    sa.ForeignKeyConstraint(['sex_id'], ['rdrv2.code.code_id'], ),
    sa.ForeignKeyConstraint(['sexual_orientation_id'], ['rdrv2.code.code_id'], ),
    sa.ForeignKeyConstraint(['site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['state_id'], ['rdrv2.code.code_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('participant_fk'),
    sa.UniqueConstraint('participant_id'),
    schema='rdrv2'
    )
    op.create_table('physical_measurements',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('physical_measurements_id', sa.Integer(), autoincrement=False, nullable=True),
    sa.Column('participant_id', sa.String(length=20), nullable=False),
    sa.Column('resource', sa.BLOB(), nullable=False),
    sa.Column('final', sa.Boolean(), nullable=False),
    sa.Column('amended_measurements_id', sa.Integer(), nullable=True),
    sa.Column('log_position_id', sa.Integer(), nullable=False),
    sa.Column('created_site_id', sa.Integer(), nullable=True),
    sa.Column('created_username', sa.String(length=255), nullable=True),
    sa.Column('finalized_site_id', sa.Integer(), nullable=True),
    sa.Column('finalized_username', sa.String(length=255), nullable=True),
    sa.Column('finalized', UTCDateTime(fsp=6), nullable=True),
    sa.Column('status', sa.Enum('UNSET', 'COMPLETED', 'CANCELLED', name='physicalmeasurementsstatus'), nullable=True),
    sa.Column('cancelled_username', sa.String(length=255), nullable=True),
    sa.Column('cancelled_site_id', sa.Integer(), nullable=True),
    sa.Column('cancelled_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('reason', sa.UnicodeText(), nullable=True),
    sa.ForeignKeyConstraint(['amended_measurements_id'], ['rdrv2.physical_measurements.physical_measurements_id'], ),
    sa.ForeignKeyConstraint(['cancelled_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['created_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['finalized_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['log_position_id'], ['rdrv2.log_position.log_position_id'], ),
    sa.ForeignKeyConstraint(['participant_id'], ['rdrv2.participant.participant_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('physical_measurements_id'),
    schema='rdrv2'
    )
    op.create_table('questionnaire_response',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('questionnaire_response_id', sa.Integer(), nullable=True),
    sa.Column('questionnaire_id', sa.Integer(), nullable=False),
    sa.Column('questionnaire_version', sa.Integer(), nullable=False),
    sa.Column('participant_id', sa.String(length=20), nullable=False),
    sa.Column('resource', sa.JSON(), nullable=False),
    sa.ForeignKeyConstraint(['participant_id'], ['rdrv2.participant.participant_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('questionnaire_response_id'),
    schema='rdrv2'
    )
    op.create_table('biobank_history',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('biobank_order_id', sa.String(length=80), nullable=True),
    sa.Column('source_username', sa.String(length=255), nullable=True),
    sa.Column('collected_username', sa.String(length=255), nullable=True),
    sa.Column('processed_username', sa.String(length=255), nullable=True),
    sa.Column('finalized_username', sa.String(length=255), nullable=True),
    sa.Column('order_status', sa.Enum('UNSET', 'AMENDED', 'CANCELLED', name='biobankorderstatus'), nullable=True),
    sa.Column('amended_reason', sa.UnicodeText(), nullable=True),
    sa.Column('last_modified', UTCDateTime(fsp=6), nullable=True),
    sa.Column('restored_username', sa.String(length=255), nullable=True),
    sa.Column('restored_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('amended_username', sa.String(length=255), nullable=True),
    sa.Column('amended_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('cancelled_username', sa.String(length=255), nullable=True),
    sa.Column('cancelled_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('collected_note', sa.UnicodeText(), nullable=True),
    sa.Column('processed_note', sa.UnicodeText(), nullable=True),
    sa.Column('finalized_note', sa.UnicodeText(), nullable=True),
    sa.Column('version', sa.Integer(), nullable=True),
    sa.Column('participant_id', sa.String(length=20), nullable=False),
    sa.Column('amended_biobank_order_id', sa.String(length=80), nullable=True),
    sa.Column('log_position_id', sa.Integer(), nullable=False),
    sa.Column('source_site_id', sa.Integer(), nullable=True),
    sa.Column('collected_site_id', sa.Integer(), nullable=True),
    sa.Column('processed_site_id', sa.Integer(), nullable=True),
    sa.Column('finalized_site_id', sa.Integer(), nullable=True),
    sa.Column('restored_site_id', sa.Integer(), nullable=True),
    sa.Column('amended_site_id', sa.Integer(), nullable=True),
    sa.Column('cancelled_site_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['amended_biobank_order_id'], ['rdrv2.biobank_order.biobank_order_id'], ),
    sa.ForeignKeyConstraint(['amended_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['cancelled_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['collected_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['finalized_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['log_position_id'], ['rdrv2.log_position.log_position_id'], ),
    sa.ForeignKeyConstraint(['participant_id'], ['rdrv2.participant.participant_id'], ),
    sa.ForeignKeyConstraint(['processed_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['restored_site_id'], ['rdrv2.site.site_id'], ),
    sa.ForeignKeyConstraint(['source_site_id'], ['rdrv2.site.site_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('biobank_order_id'),
    sa.UniqueConstraint('version'),
    schema='rdrv2'
    )
    op.create_table('biobank_order_identifier',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('system', sa.String(length=80), nullable=True),
    sa.Column('value', sa.String(length=80), nullable=True),
    sa.Column('biobank_order_id', sa.String(length=80), nullable=False),
    sa.ForeignKeyConstraint(['biobank_order_id'], ['rdrv2.biobank_order.biobank_order_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('system', 'value'),
    schema='rdrv2'
    )
    op.create_table('biobank_order_identifier_history',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('system', sa.String(length=80), nullable=True),
    sa.Column('value', sa.String(length=80), nullable=True),
    sa.Column('version', sa.Integer(), nullable=True),
    sa.Column('biobank_order_id', sa.String(length=80), nullable=False),
    sa.ForeignKeyConstraint(['biobank_order_id'], ['rdrv2.biobank_order.biobank_order_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('system', 'value'),
    sa.UniqueConstraint('version'),
    schema='rdrv2'
    )
    op.create_table('biobank_ordered_sample',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('test', sa.String(length=80), nullable=True),
    sa.Column('description', sa.UnicodeText(), nullable=False),
    sa.Column('processing_required', sa.Boolean(), nullable=False),
    sa.Column('collected', UTCDateTime(fsp=6), nullable=True),
    sa.Column('processed', UTCDateTime(fsp=6), nullable=True),
    sa.Column('finalized', UTCDateTime(fsp=6), nullable=True),
    sa.Column('order_id', sa.String(length=80), nullable=True),
    sa.ForeignKeyConstraint(['order_id'], ['rdrv2.biobank_order.biobank_order_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('order_id', 'test'),
    schema='rdrv2'
    )
    op.create_table('biobank_ordered_sample_history',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('test', sa.String(length=80), nullable=True),
    sa.Column('description', sa.UnicodeText(), nullable=False),
    sa.Column('processing_required', sa.Boolean(), nullable=False),
    sa.Column('collected', UTCDateTime(fsp=6), nullable=True),
    sa.Column('processed', UTCDateTime(fsp=6), nullable=True),
    sa.Column('finalized', UTCDateTime(fsp=6), nullable=True),
    sa.Column('version', sa.Integer(), nullable=True),
    sa.Column('order_id', sa.String(length=80), nullable=True),
    sa.ForeignKeyConstraint(['order_id'], ['rdrv2.biobank_order.biobank_order_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('order_id', 'test'),
    sa.UniqueConstraint('version'),
    schema='rdrv2'
    )
    op.create_table('measurement',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('measurement_id', sa.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('physical_measurements_id', sa.Integer(), nullable=False),
    sa.Column('code_system', sa.String(length=255), nullable=False),
    sa.Column('code_value', sa.String(length=255), nullable=False),
    sa.Column('measurement_time', UTCDateTime(fsp=6), nullable=False),
    sa.Column('body_site_code_system', sa.String(length=255), nullable=True),
    sa.Column('body_site_code_value', sa.String(length=255), nullable=True),
    sa.Column('value_string', sa.Text(), nullable=True),
    sa.Column('value_decimal', sa.Float(), nullable=True),
    sa.Column('value_unit', sa.String(length=255), nullable=True),
    sa.Column('value_code_system', sa.String(length=255), nullable=True),
    sa.Column('value_code_value', sa.String(length=255), nullable=True),
    sa.Column('value_datetime', UTCDateTime(fsp=6), nullable=True),
    sa.Column('parent_id', sa.BIGINT(), nullable=True),
    sa.Column('qualifier_id', sa.BIGINT(), nullable=True),
    sa.ForeignKeyConstraint(['parent_id'], ['rdrv2.measurement.measurement_id'], ),
    sa.ForeignKeyConstraint(['physical_measurements_id'], ['rdrv2.physical_measurements.physical_measurements_id'], ),
    sa.ForeignKeyConstraint(['qualifier_id'], ['rdrv2.measurement.measurement_id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('measurement_id'),
    schema='rdrv2'
    )
    op.create_table('questionnaire_response_answer',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('questionnaire_response_answer_id', sa.Integer(), nullable=True),
    sa.Column('questionnaire_response_id', sa.Integer(), nullable=False),
    sa.Column('question_id', sa.Integer(), nullable=False),
    sa.Column('end_time', UTCDateTime(fsp=6), nullable=True),
    sa.Column('value_system', sa.String(length=50), nullable=True),
    sa.Column('value_code_id', sa.Integer(), nullable=True),
    sa.Column('value_boolean', sa.Boolean(), nullable=True),
    sa.Column('value_decimal', sa.Float(), nullable=True),
    sa.Column('value_integer', sa.Integer(), nullable=True),
    sa.Column('value_string', sa.Text(), nullable=True),
    sa.Column('value_date', sa.Date(), nullable=True),
    sa.Column('value_datetime', UTCDateTime(fsp=6), nullable=True),
    sa.Column('value_uri', sa.String(length=1024), nullable=True),
    sa.ForeignKeyConstraint(['question_id'], ['rdrv2.questionnaire_question.questionnaire_question_id'], ),
    sa.ForeignKeyConstraint(['questionnaire_response_id'], ['rdrv2.questionnaire_response.questionnaire_response_id'], ),
    sa.ForeignKeyConstraint(['value_code_id'], ['rdrv2.code.code_id'], ),
    sa.PrimaryKeyConstraint('id'),
    schema='rdrv2'
    )
    op.create_table('measurement_to_qualifier',
    sa.Column('measurement_id', sa.BIGINT(), nullable=False),
    sa.Column('qualifier_id', sa.BIGINT(), nullable=False),
    sa.ForeignKeyConstraint(['measurement_id'], ['rdrv2.measurement.measurement_id'], ),
    sa.ForeignKeyConstraint(['qualifier_id'], ['rdrv2.measurement.measurement_id'], ),
    sa.PrimaryKeyConstraint('measurement_id', 'qualifier_id'),
    schema='rdrv2'
    )
    # ### end Alembic commands ###


def downgrade_rdrv2():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('measurement_to_qualifier', schema='rdrv2')
    op.drop_table('questionnaire_response_answer', schema='rdrv2')
    op.drop_table('measurement', schema='rdrv2')
    op.drop_table('biobank_ordered_sample_history', schema='rdrv2')
    op.drop_table('biobank_ordered_sample', schema='rdrv2')
    op.drop_table('biobank_order_identifier_history', schema='rdrv2')
    op.drop_table('biobank_order_identifier', schema='rdrv2')
    op.drop_table('biobank_history', schema='rdrv2')
    op.drop_table('questionnaire_response', schema='rdrv2')
    op.drop_table('physical_measurements', schema='rdrv2')
    op.drop_table('participant_summary', schema='rdrv2')
    op.drop_table('biobank_stored_sample', schema='rdrv2')
    op.drop_table('biobank_order', schema='rdrv2')
    op.drop_table('participant_history', schema='rdrv2')
    op.drop_index('participant_withdrawl_sign_up_hpo', table_name='participant', schema='rdrv2')
    op.drop_index('participant_hpo_id', table_name='participant', schema='rdrv2')
    op.drop_index('participant_biobank_id', table_name='participant', schema='rdrv2')
    op.drop_table('participant', schema='rdrv2')
    op.drop_table('site', schema='rdrv2')
    op.drop_table('questionnaire_question', schema='rdrv2')
    op.drop_table('questionnaire_concept', schema='rdrv2')
    op.drop_table('code_history', schema='rdrv2')
    op.drop_table('organization', schema='rdrv2')
    op.drop_table('metrics_bucket', schema='rdrv2')
    op.drop_table('code', schema='rdrv2')
    op.drop_table('questionnaire_history', schema='rdrv2')
    op.drop_table('questionnaire', schema='rdrv2')
    op.drop_table('metrics_version', schema='rdrv2')
    op.drop_table('log_position', schema='rdrv2')
    op.drop_table('hpo', schema='rdrv2')
    op.drop_table('code_book', schema='rdrv2')
    op.drop_table('calendar', schema='rdrv2')
    # ### end Alembic commands ###


def upgrade_metricsv2():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('metric_set',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('metric_set_id', sa.String(length=50), nullable=True),
    sa.Column('metric_set_type', sa.Enum('PUBLIC_PARTICIPANT_AGGREGATIONS', name='metricsettype'), nullable=False),
    sa.Column('last_modified', UTCDateTime(fsp=6), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('metric_set_id'),
    schema='metricsv2'
    )
    op.create_table('aggregate_metrics',
    sa.Column('id', sa.BigInteger(), autoincrement=True, nullable=False),
    sa.Column('created', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('modified', mysql.DATETIME(fsp=6), server_default=sa.text('CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP'), nullable=False),
    sa.Column('metric_set_id', sa.String(length=50), nullable=True),
    sa.Column('metrics_key', sa.Enum('GENDER', 'RACE', 'STATE', 'AGE_RANGE', 'PHYSICAL_MEASUREMENTS', 'BIOSPECIMEN_SAMPLES', 'QUESTIONNAIRE_ON_OVERALL_HEALTH', 'QUESTIONNAIRE_ON_PERSONAL_HABITS', 'QUESTIONNAIRE_ON_SOCIODEMOGRAPHICS', 'ENROLLMENT_STATUS', name='metricskey'), nullable=True),
    sa.Column('value', sa.String(length=50), nullable=True),
    sa.Column('count', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['metric_set_id'], ['metricsv2.metric_set.metric_set_id'], ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('metric_set_id', 'metrics_key', 'value', name='uidx_msetid_key_value'),
    schema='metricsv2'
    )
    # ### end Alembic commands ###


def downgrade_metricsv2():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('aggregate_metrics', schema='metricsv2')
    op.drop_table('metric_set', schema='metricsv2')
    # ### end Alembic commands ###

